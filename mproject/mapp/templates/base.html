{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head> 
        <title>Personal Profile Page</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="{%static 'css/style.css' %}" type="text/css">
        <link rel="stylesheet" href="{%static 'css/styles.css' %}" type="text/css">
        <link rel="stylesheet" href="{%static 'css/main.css' %}" type="text/css">
        <link rel="stylesheet" href="{% static 'css/skins/pink.css' %}" type="text/css">

                                  <!--Live Style Switcher - Demo Only-->
        <link rel="stylesheet" class="alternate-style" title="pink" href="{% static 'css/skins/pink.css' %}" type="text/css" disabled>
        <link rel="stylesheet" class="alternate-style" title="blue" href="{% static 'css/skins/blue.css' %}" type="text/css" disabled>
        <link rel="stylesheet" class="alternate-style" title="orange" href="{% static 'css/skins/orange.css' %}" type="text/css" disabled>
        <link rel="stylesheet" class="alternate-style" title="yellow" href="{% static 'css/skins/yellow.css' %}" type="text/css" disabled>
        <link rel="stylesheet" class="alternate-style" title="green" href="{% static 'css/skins/green.css' %}" type="text/css" disabled>

        <link rel="stylesheet" href="{% static 'css/styleSwitcher.css' %}" type="text/css">


    </head>
   <body>
     <div class="preloaded">
        <div class="loader">

        </div>
     </div>


       <!--main-container-->  
       <div class="main-container">
          <!--Aside begins-->
           <div class="aside">
               <!--logo-->
               <div class="logo">
                <img src="{% static 'images/profile.png' %}" alt="profile photo" style="border-radius:50%; border:5px solid white;">
                  <a href="#home" class="active">DOMINIC</a>
               </div>
               <!--Nav Toggle btn-->
               <div class="nav-toggle">
                   <span></span>
               </div>
               <!--Nav-->
               <ul class="nav">
                {% comment %} <li><a href="#home" class="active"><i class="fa fa-home"></i>profile</a></li> {% endcomment %}
                <li><a href="#attendance" class="active"><i class="fa fa-home"></i>School Reports</a></li>
                <li><a href="#subjects" class="active"><i class="fa fa-home"></i>School Subjects</a></li>
                <li><a href="#about"><i class="fa fa-user"></i>Teachers Records</a></li>
                <li><a href="#services"><i class="fa fa-list"></i>Lesson Note</a></li>
                <li><a href="#portfolio"><i class="fa fa-briefcase"></i>Broadsheet</a></li>
                <li><a href="#blog"><i class="fa fa-envelope"></i>Examination</a></li>
                <li><a href="#contact"><i class="fa fa-user"></i>Teacher Diary</a></li>
                <li><a href="#seven"><i class="fa fa-user"></i>Tests</a></li>
                <li><a href="#eight"><i class="fa fa-list"></i>Other Records</a></li>
                <li><a href="#"><i class="fa fa-briefcase"></i>Parent Report</a></li>
                <li><a href="#"><i class="fa fa-briefcase"></i>Student Report</a></li>
                <li><a href="#"><i class="fa fa-envelope"></i>Logout</a></li>
               </ul>
               <!--Copyright-->
               <div class="copyright-text">
                    &copy; 2021 Jascube Technologies 
               </div>

           </div>
           <!--Aside ends-->

           <!--Main content-->
           <div class="main-content">
               <!--Home Section-->

               <section class="home section active" id="home">
                <div class="container">
                    <div class="intro">
                      <div class="profile">
                        <img src="{% static 'images/profile.png' %}">
                        <p>DOMINIC TORRETO</P>
                    </div>
                </div>
              </section>
               <!--Home Section End-->
               
               <section class="about section" id="attendance">
                <div class="container">
                    <div class="row">
                        <div class="portfolio-filter padd-15">
                            <h2>Principal Dashboard</h2>

                            <!-- Department Cards -->
                            <div class="row">
                                {% for department in departments %}
                                <div class="col-md-4">
                                    <div class="card department-card" data-department="{{ department.name }}">
                                        <div class="card-body">
                                            <h5 class="card-title">{{ department.get_name_display }}</h5>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>

                            <!-- Subjects Section -->
                            <div id="subjects-section" style="display: none;">
                                <h3 id="subjects-title"></h3>
                                <ul id="subject-list" class="list-group"></ul>
                                <button id="add-subject-btn" class="btn btn-primary mt-3" onclick="showAddSubjectForm()">Add Subject</button>
                            </div>

                            <!-- Add Subject Modal -->
                            <div id="add-subject-modal" style="display: none;">
                                <div class="modal-overlay">
                                    <div class="modal-content">
                                        <h4>Add New Subject</h4>
                                        <input type="text" id="subject-name-input" placeholder="Enter Subject Name" class="form-control mb-3">
                                        <button id="save-subject-btn" class="btn btn-success">Save</button>
                                        <button onclick="closeModal()" class="btn btn-secondary">Cancel</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Subject List -->
                            <div id="subject-list-section">
                                <h3>Subjects</h3>
                                <ul id="subject-items"></ul>
                                <button class="btn btn-primary" onclick="showAddSubjectForm()">Add Subject</button>
                            </div>

                            <!-- Add/Update Subject Form -->
                            <div id="subject-form" style="display: none;">
                                <span class="close-form" onclick="closeForm()">Ã—</span>
                                <h4 id="form-title">Add Subject</h4>
                                <form id="subject-form-body">
                                    <label for="subject-name">Subject Name:</label>
                                    <input type="text" id="subject-name" required>
                                    <button type="submit">Save</button>
                                </form>
                            </div>

                        </div> <!-- portfolio-filter -->
                    </div> <!-- row -->
                </div> <!-- container -->
            </section>

            <!-- JavaScript -->
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                    const departmentCards = document.querySelectorAll('.department-card');
                    let selectedDepartment = null;

                    // Handle card click
                    departmentCards.forEach(card => {
                        card.addEventListener('click', function () {
                            departmentCards.forEach(c => c.classList.remove('active'));
                            card.classList.add('active');
                            selectedDepartment = card.getAttribute('data-department');
                            fetchSubjects(selectedDepartment);
                        });
                    });

                    // Fetch subjects for a department
                    function fetchSubjects(department) {
                        fetch(`/fetch-subjects/?department=${department}`)
                            .then(response => response.json())
                            .then(data => {
                                const subjectItems = document.getElementById('subject-items');
                                subjectItems.innerHTML = '';
                                data.subjects.forEach(subject => {
                                    subjectItems.innerHTML += `
                                        <li>
                                            ${subject.name}
                                            <button onclick="deleteSubject(${subject.id})" class="btn btn-danger btn-sm">Delete</button>
                                        </li>`;
                                });
                            });
                    }

                    // Show Add Subject Form
                    window.showAddSubjectForm = function () {
                        document.getElementById('subject-form').style.display = 'block';
                        document.getElementById('form-title').innerText = 'Add Subject';
                        document.getElementById('subject-form-body').onsubmit = addSubject;
                    };

                    // Close Form
                    window.closeForm = function () {
                        document.getElementById('subject-form').style.display = 'none';
                    };

                    // Add Subject
                    function addSubject(event) {
                        event.preventDefault();
                        const subjectName = document.getElementById('subject-name').value;
                        fetch('/add-subject/', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'X-CSRFToken': '{{ csrf_token }}'
                            },
                            body: JSON.stringify({ department: selectedDepartment, subject_name: subjectName })
                        })
                        .then(response => response.json())
                        .then(() => {
                            fetchSubjects(selectedDepartment);
                            closeForm();
                        });
                    }

                    // Delete Subject
                    window.deleteSubject = function (subjectId) {
                        fetch('/delete-subject/', {
                            method: 'POST',
                            headers: { 
                                'Content-Type': 'application/json', 
                                'X-CSRFToken': '{{ csrf_token }}' 
                            },
                            body: JSON.stringify({ subject_id: subjectId })
                        })
                        .then(() => fetchSubjects(selectedDepartment));
                    };
                });
            </script>  





            <section class="about section" id="subjects">
              <div class="container">
                  <div class="row">
                      <div class="portfolio-filter padd-15">
                        <div class="row">
                        <style>
                            /* General page styling */
                            body {
                                font-family: Arial, sans-serif;
                                background-color: #f9f9f9;
                                margin: 0;
                                padding: 0;
                            }

                            h2, h3 {
                                text-align: center;
                                margin-bottom: 20px;
                                color: #333;
                            }

                            /* Card container */
                            .row {
                                display: flex;
                                justify-content: center;
                                gap: 20px;
                                margin-top: 30px;
                            }

                            /* Styling for department cards */
                            .department-card {
                                width: 250px;
                                height: 150px;
                                border: none;
                                border-radius: 10px;
                                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                                transition: transform 0.2s ease, box-shadow 0.2s ease;
                                cursor: pointer;
                            }

                            .department-card:hover {
                                transform: scale(1.05);
                                box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
                            }

                            .department-card .card-body {
                                text-align: center;
                                background: linear-gradient(to right, #6a11cb, #2575fc);
                                {% comment %} background: linear-gradient(to right, #6a11cb, #2575fc); {% endcomment %}
                                color: #fff;
                                border-radius: 10px;
                                display: flex;
                                justify-content: center;
                                align-items: center;
                                height: 100%;
                            }

                            /* Subject list styling */
                            #subject-list {
                                margin: 30px auto;
                                width: 80%;
                                max-width: 600px;
                                background: #fff;
                                padding: 20px;
                                border-radius: 10px;
                                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                            }

                            #subject-list ul {
                                list-style: none;
                                padding: 0;
                                margin: 0;
                            }

                            #subject-list li {
                                padding: 10px;
                                border-bottom: 1px solid #ddd;
                                color: #333;
                                font-size: 16px;
                                transition: background-color 0.2s ease;
                                cursor: pointer;
                            }

                            #subject-list li:last-child {
                                border-bottom: none;
                            }

                            #subject-list li:hover {
                                background-color: #f0f0f0;
                            }

                            /* Add/update subject form styling */
                            #subject-form {
                                display: none;
                                background-color: white;
                                padding: 20px;
                                border-radius: 10px;
                                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                                max-width: 500px;
                                margin: 20px auto;
                            }

                            #subject-form label {
                                display: block;
                                margin: 10px 0 5px;
                            }

                            #subject-form input {
                                width: 100%;
                                padding: 10px;
                                margin-bottom: 20px;
                                border: 1px solid #ddd;
                                border-radius: 5px;
                            }

                            #subject-form button {
                                padding: 10px 20px;
                                background-color: #2575fc;
                                color: white;
                                border: none;
                                border-radius: 5px;
                                cursor: pointer;
                            }

                            #subject-form button:hover {
                                background-color: #6a11cb;
                            }

                            .close-form {
                                cursor: pointer;
                                color: red;
                                font-size: 20px;
                                text-align: right;
                            }
                        </style>

                        {% comment %} <h2>Select a Department</h2> {% endcomment %}

                        <!-- Cards for Departments -->
                        <div class="row">
                            <!-- Science Card -->
                            <div class="col-md-4">
                                <div class="card department-card" data-department="S">
                                    <div class="card-body">
                                        <h5 class="card-title">Science</h5>
                                    </div>
                                </div>
                            </div>
                            <!-- Art Card -->
                            <div class="col-md-4">
                                <div class="card department-card" data-department="A">
                                    <div class="card-body">
                                        <h5 class="card-title">Art</h5>
                                    </div>
                                </div>
                            </div>
                            <!-- Commercial Card -->
                            <div class="col-md-4">
                                <div class="card department-card" data-department="C">
                                    <div class="card-body">
                                        <h5 class="card-title">Commercial</h5>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Subject List Section -->
                        {% comment %} <h3 class="mt-5">Subjects</h3> {% endcomment %}
                        <div id="subject-list">
                            {% comment %} <p>Select a department to view subjects.</p> {% endcomment %}
                        </div>

                        <!-- Subject Form Section -->
                        <div id="subject-form">
                            <span class="close-form" onclick="closeForm()">Ã—</span>
                            <h4 id="form-title">Add Subject</h4>
                            <form id="subject-form-body">
                                <label for="subject-name">Subject Name:</label>
                                <input type="text" id="subject-name" name="subject_name" required>
                                <button type="submit">Save Subject</button>
                            </form>
                        </div>

                        <!-- JavaScript for AJAX and Form Handling -->
                        <script>
                        document.addEventListener('DOMContentLoaded', function () {
                            const departmentCards = document.querySelectorAll('.department-card');
                            departmentCards.forEach(card => {
                                card.addEventListener('click', function () {
                                    const department = card.dataset.department;
                                    fetchSubjects(department);
                                });
                            });

                            // Function to fetch subjects
                            function fetchSubjects(department) {
                                fetch(`/fetch-subjects/?department=${department}`)
                                    .then(response => response.json())
                                    .then(data => {
                                        const subjectListDiv = document.getElementById('subject-list');
                                        if (data.subjects.length > 0) {
                                            let subjectHTML = '<ul>';
                                            data.subjects.forEach(subject => {
                                                subjectHTML += `
                                                    <li onclick="editSubject(${subject.id})">${subject.name}</li>
                                                `;
                                            });
                                            subjectHTML += '</ul>';
                                            subjectListDiv.innerHTML = subjectHTML;
                                        } else {
                                            subjectListDiv.innerHTML = '<p>No subjects available for this department.</p>';
                                        }
                                        subjectListDiv.innerHTML += `
                                            <button onclick="showAddSubjectForm()">Add Subject</button>
                                        `;
                                    })
                                    .catch(error => {
                                        console.error('Error fetching subjects:', error);
                                        document.getElementById('subject-list').innerHTML = '<p>Failed to load subjects.</p>';
                                    });
                            }

                            // Show form to add subject
                            window.showAddSubjectForm = function () {
                                document.getElementById('subject-form').style.display = 'block';
                                document.getElementById('form-title').textContent = 'Add Subject';
                                document.getElementById('subject-name').value = ''; // Clear the input field
                                document.getElementById('subject-form-body').onsubmit = function (e) {
                                    e.preventDefault();
                                    addSubject();
                                };
                            };

                            // Close the form
                            window.closeForm = function () {
                                document.getElementById('subject-form').style.display = 'none';
                            };

                            // Add subject
                            function addSubject() {
                                const subjectName = document.getElementById('subject-name').value;
                                const department = document.querySelector('.department-card.active').dataset.department;

                                fetch('/add-subject/', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json',
                                        'X-CSRFToken': '{{ csrf_token }}',
                                    },
                                    body: JSON.stringify({ subject_name: subjectName, department: department })
                                })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.success) {
                                        alert('Subject added successfully!');
                                        fetchSubjects(department);  // Refresh subject list
                                        closeForm();
                                    } else {
                                        alert('Failed to add subject!');
                                    }
                                })
                                .catch(error => console.error('Error adding subject:', error));
                            }

                            // Edit subject
                            window.editSubject = function (subjectId) {
                                // You would fetch the subject and prefill the form for updating
                                fetch(`/get-subject/${subjectId}/`)
                                    .then(response => response.json())
                                    .then(data => {
                                        document.getElementById('subject-name').value = data.name;
                                        document.getElementById('form-title').textContent = 'Update Subject';
                                        document.getElementById('subject-form-body').onsubmit = function (e) {
                                            e.preventDefault();
                                            updateSubject(subjectId);
                                        };
                                        document.getElementById('subject-form').style.display = 'block';
                                    })
                                    .catch(error => console.error('Error editing subject:', error));
                            };

                            // Update subject
                            function updateSubject(subjectId) {
                                const subjectName = document.getElementById('subject-name').value;
                                fetch(`/update-subject/${subjectId}/`, {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json',
                                        'X-CSRFToken': '{{ csrf_token }}',
                                    },
                                    body: JSON.stringify({ subject_name: subjectName })
                                })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.success) {
                                        alert('Subject updated successfully!');
                                        fetchSubjects(document.querySelector('.department-card.active').dataset.department);
                                        closeForm();
                                    } else {
                                        alert('Failed to update subject!');
                                    }
                                })
                                .catch(error => console.error('Error updating subject:', error));
                            }
                        });
                        </script>

                  </div>

                  </div>

                  <!-- portfolio Item Ends -->
                </div>
                  
                </div>
          </section> 


            <section class="about section" id="about">
              <div class="container">
                    <div class="row">
                      <h1>Teachers Record loading......</h1>                            
                      <!--Service Item Ends-->
                    </div>
              </div>
          </section>

               
               <!--About Section Begins-->

               <!--About Section Ends-->

               <!--Service Section Begins-->
           <section class="service section" id="services">
                <div class="container">
                      <div class="row">

                        <h1>Lesson Notes loading......</H1>
                              
                        <!--Service Item Ends-->
                      </div>
                </div>
            </section>
               <!--Service Section Ends-->

            <!--Portfolio Section Begins-->
             <section class="portfolio section" id="portfolio">
                <div class="container">
                    <div class="row">
                        <div class="portfolio-filter padd-15">
                          <div class="assign">
                            <label for="perfect-textarea"></label>
                            <textarea id="perfect-textarea" name="message" rows="10" cols="30" placeholder="Enter your text here..."></textarea>

                            <div class="checkbox-container"> 
                              <label for="myCheckbox"> 
                                <input type="checkbox" id="myCheckbox" name="myCheckbox"> Select all </label>
                            </div>

                            <div class="checkbox-container"> 
                              <label for="myCheckbox"> 
                                <input type="checkbox" id="myCheckbox" name="myCheckbox"> Some</label>
                            </div>

                        </div>
  
                    </div>

                    <!-- portfolio Item Ends -->
                  </div>
                    
                  </div>
            </section>  
            <!--Portfolio Section Ends-->  


            <!--Blog section begins-->
            <section class="blog section" id="blog">
                <div class="container">
                    <div class="row">
                      
                      <div class="container">
                        <label for="perfect-textarea">Your Message:</label>
                        <textarea id="perfect-textarea" name="message" rows="10" cols="30" placeholder="Enter your text here..."></textarea>
                    </div>

                      <div class="container">
                        <input type="file" id="file-input" class="file-input" style="display: none;" />
                        <button id="import-btn" class="btn">Import</button>

                          <!-- Blog content Ends -->
                    </div>
                </div>
            </section>
            <!--Blog Section Ends-->

            <!--Contact Section Begins-->
                       <!--Blog section begins-->
                       <section class="contact section" id="contact">
                        <div class="container">
                            <div class="row">

                              <div class="table-container">
                                  <table>
                                    <h3>CA 1</h3>
                                      <thead>
                                          <tr>
                                              <th>Student Name</th>
                                              <th>Class Activities</th>
                                              <th>Punctuality</th>
                                              <th>Test1</th>
                                              <th>Test2</th>
                                              <th>Test3</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                          <!-- Add rows here -->
                                          <tr>
                                              <td>Dominic</td>
                                              <td>Activity 1</td>
                                              <td>On Time</td>
                                              <td>85</td>
                                              <td>90</td>
                                              <td>88</td>
                                          </tr>
                                          <tr>
                                              <td>Lunar</td>
                                              <td>Activity 2</td>
                                              <td>Late</td>
                                              <td>78</td>
                                              <td>84</td>
                                              <td>80</td>
                                          </tr>
                                          <!-- Add more rows as needed -->
                                      </tbody>
                                  </table>
                              </div>

                              <div class="table-container">
                                  <table>
                                    <h3>CA 2</h3>
                                      <thead>
                                          <tr>
                                              <th>Student Name</th>
                                              <th>Class Activities</th>
                                              <th>Punctuality</th>
                                              <th>Test1</th>
                                              <th>Test2</th>
                                              <th>Test3</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                          <!-- Add rows here -->
                                          <tr>
                                              <td>Dominic</td>
                                              <td>Activity 1</td>
                                              <td>On Time</td>
                                              <td>85</td>
                                              <td>90</td>
                                              <td>88</td>
                                          </tr>
                                          <tr>
                                              <td>Lunar</td>
                                              <td>Activity 2</td>
                                              <td>Late</td>
                                              <td>78</td>
                                              <td>84</td>
                                              <td>80</td>
                                          </tr>
                                          <!-- Add more rows as needed -->
                                      </tbody>
                                  </table>
                              </div>

                              <div class="table-container">
                                  <table>
                                    <h3>CA 3</h3>
                                      <thead>
                                          <tr>
                                              <th>Student Name</th>
                                              <th>Class Activities</th>
                                              <th>Punctuality</th>
                                              <th>Test1</th>
                                              <th>Test2</th>
                                              <th>Test3</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                          <!-- Add rows here -->
                                          <tr>
                                              <td>Dominic</td>
                                              <td>Activity 1</td>
                                              <td>On Time</td>
                                              <td>85</td>
                                              <td>90</td>
                                              <td>88</td>
                                          </tr>
                                          <tr>
                                              <td>Lunar</td>
                                              <td>Activity 2</td>
                                              <td>Late</td>
                                              <td>78</td>
                                              <td>84</td>
                                              <td>80</td>
                                          </tr>
                                          <!-- Add more rows as needed -->
                                      </tbody>
                                  </table>
                              </div>


        
                                  <!-- Blog content Ends -->
                            </div>
                        </div>
                    </section>
                    <!--Blog Section Ends-->
        
            <!--Contact Section ends-->


                        <!--Blog section begins-->
                        <section class="blog section" id="seven">
                          <div class="container">
                              <div class="row">
                                
                                <div class="exam">
                                  <label for="perfect-textarea"></label>
                                  <textarea id="perfect-textarea" name="message" rows="10" cols="30" placeholder="Enter your text here..."></textarea>
                              
                                  <input type="file" id="file-input" class="file-input" style="display: none;" />
                                  <button id="import-btn" class="btn">Import</button>

                                  <button id="submit">Submit</button>
                                </div>
          
                                    <!-- Blog content Ends -->
                              </div>
                          </div>
                      </section>
                      <!--Blog Section Ends-->

                                  <!--Blog section begins-->
            <section class="blog section" id="eight">
              <div class="container">
                  <div class="row">
                    
                    <div class="container">
                      <label for="perfect-textarea">Your Message:</label>
                      <textarea id="perfect-textarea" name="message" rows="10" cols="30" placeholder="Enter your text here..."></textarea>
                  </div>

                    <div class="container">
                      <input type="file" id="file-input" class="file-input" style="display: none;" />
                      <button id="import-btn" class="btn">Import</button>

                        <!-- Blog content Ends -->
                  </div>
              </div>
          </section>
          <!--Blog Section Ends-->

          
                      <!--Blog section begins-->
                      <section class="blog section" id="nine">
                        <div class="container">
                            <div class="row">
                              
                              <div class="container">
                                <label for="perfect-textarea">Your Message:</label>
                                <textarea id="perfect-textarea" name="message" rows="10" cols="30" placeholder="Enter your text here..."></textarea>
                            </div>
        
                              <div class="container">
                                <input type="file" id="file-input" class="file-input" style="display: none;" />
                                <button id="import-btn" class="btn">Import</button>
        
                                  <!-- Blog content Ends -->
                            </div>
                        </div>
                    </section>
                    <!--Blog Section Ends-->
        

                                <!--Blog section begins-->
            <section class="blog section" id="ten">
              <div class="container">
                  <div class="row">
                    
                    <div class="container">
                      <label for="perfect-textarea">Your Message:</label>
                      <textarea id="perfect-textarea" name="message" rows="10" cols="30" placeholder="Enter your text here..."></textarea>
                  </div>

                    <div class="container">
                      <input type="file" id="file-input" class="file-input" style="display: none;" />
                      <button id="import-btn" class="btn">Import</button>

                        <!-- Blog content Ends -->
                  </div>
              </div>
          </section>
          <!--Blog Section Ends-->

          <script>
            document.addEventListener('DOMContentLoaded', () => {
                const departmentCards = document.querySelectorAll('.department-card');
                let selectedDepartment = null;
            
                // Handle card click
                departmentCards.forEach(card => {
                    card.addEventListener('click', function () {
                        departmentCards.forEach(c => c.classList.remove('active'));
                        card.classList.add('active');
                        selectedDepartment = card.getAttribute('data-department');
                        fetchSubjects(selectedDepartment);
                    });
                });
            
                // Fetch subjects for a department
                function fetchSubjects(department) {
                    fetch(`/fetch-subjects/?department=${department}`)
                        .then(response => response.json())
                        .then(data => {
                            const subjectItems = document.getElementById('subject-items');
                            subjectItems.innerHTML = '';
                            data.subjects.forEach(subject => {
                                subjectItems.innerHTML += `
                                    <li>
                                        ${subject.name}
                                        <button onclick="deleteSubject(${subject.id})" class="btn btn-danger btn-sm">Delete</button>
                                    </li>`;
                            });
                        });
                }
            
                // Show Add Subject Form
                window.showAddSubjectForm = function () {
                    document.getElementById('subject-form').style.display = 'block';
                    document.getElementById('form-title').innerText = 'Add Subject';
                    document.getElementById('subject-form-body').onsubmit = addSubject;
                };
            
                // Close Form
                window.closeForm = function () {
                    document.getElementById('subject-form').style.display = 'none';
                };
            
                // Add Subject
                function addSubject(event) {
                    event.preventDefault();
                    const subjectName = document.getElementById('subject-name').value;
                    fetch('/add-subject/', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRFToken': '{{ csrf_token }}'
                        },
                        body: JSON.stringify({ department: selectedDepartment, subject_name: subjectName })
                    })
                    .then(response => response.json())
                    .then(() => {
                        fetchSubjects(selectedDepartment);
                        closeForm();
                    });
                }
            
                // Delete Subject
                window.deleteSubject = function (subjectId) {
                    fetch('/delete-subject/', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json', 'X-CSRFToken': '{{ csrf_token }}' },
                        body: JSON.stringify({ subject_id: subjectId })
                    })
                    .then(() => fetchSubjects(selectedDepartment));
                };
            });
            </script>


            
           </div>
           <!--Main content ends-->
       </div>
       <!--main-container ends-->

<!-- Lightbox begins-->
<div class="lightbox">
  <div class="lightbox-content">
    <div class="lightbox-close">&times;</div>
    <img src="images/portfolio/1a.png" class="lightbox-img" onclick="nextItem()">
    <div class="lightbox-caption">
      <div class="caption-text">Web Design</div>
      <div class="caption-counter"></div>
   </div>
  </div>
  <div class="lightbox-controls">
    <div class="prev-item" onclick="prevItem"><i class="fa fa-angle-left"></i></div>
    <div class="next-item" onclick="nextItem"><i class="fa fa-angle-right"></i></div>
  </div>
</div>
<!-- Lightbox ends-->

<!--Live Switcher begins-->
<div class="style-switcher">
  <div class="toggle-style-switcher">
    <i class="fa fa-cog fa-spin" ></i>
  </div>
  <h5>Style Switcher</h5>
  <ul>
    <li><a href="Javascript:void(0);" title="pink" style="background-color: #ec1839" onclick="setActiveStyle('pink')"></a></li>
    <li><a href="Javascript:void(0);" title="blue" style="background-color: #2196f3" onclick="setActiveStyle('blue')"></a></li>
    <li><a href="Javascript:void(0);" title="orange" style="background-color: #fa5b0f" onclick="setActiveStyle('orange')"></a></li>
    <li><a href="Javascript:void(0);" title="yellow" style="background-color: #ffb400" onclick="setActiveStyle('yellow')"></a></li>
    <li><a href="Javascript:void(0);" title="green" style="background-color: #72b626" onclick="setActiveStyle('green')"></a></li>
  </ul>
  <h5>Body Skin</h5>
  <label>
    <input type="radio" class="body-skin" name="body-style" value="light" checked="true">
    Light
  </label>
  <input type="radio" class="body-skin" name="body-style" value="dark">
    Dark
  </label>
</div>
<!--Live Switcher end-->

<!--Javascript Template-->
<script src="{% static 'js/script.js' %}"></script>

<!-- styleSwitcher Javascript -->
<script src="{% static 'js/styleSwitcher.js' %}"></script>
</body>
</html>
